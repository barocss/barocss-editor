# 입력 처리 수동 테스트 시나리오

이 문서는 브라우저에서 실제로 입력 기능을 테스트하기 위한 체계적인 시나리오를 제공합니다.

## 테스트 환경

- 브라우저: Chrome, Firefox, Safari (각각 테스트)
- 테스트 앱: `apps/editor-test/src/main.ts`
- Devtool: 오른쪽 패널에서 실시간 모델 상태 확인

---

## 테스트 체크리스트

각 테스트를 수행한 후 다음을 확인:
- [ ] 모델이 올바르게 업데이트되었는지 (Devtool에서 확인)
- [ ] DOM이 올바르게 렌더링되었는지 (브라우저에서 확인)
- [ ] 커서 위치가 올바른지
- [ ] Mark가 올바르게 유지/조정되었는지
- [ ] Devtool의 "Last Input" 패널에 올바른 정보가 표시되는지

---

## 1. 기본 텍스트 입력 (C1)

### 1.1 단일 inline-text에 텍스트 입력
**시나리오**:
1. 빈 inline-text 노드에 커서를 두고 "Hello" 입력

**예상 결과**:
- 모델: `text: "Hello"`
- DOM: "Hello" 텍스트 표시
- 커서: "Hello" 뒤에 위치
- Devtool: `case: "C1"`, `inputType: "insertText"`

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌
- [ ] Devtool 표시: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 1.2 Mark가 있는 텍스트에 입력
**시나리오**:
1. "bold and italic" 텍스트 (bold+italic mark) 중간에 커서를 두고 "x" 입력

**예상 결과**:
- 모델: 텍스트가 "bold xand italic"로 변경, mark는 전체에 유지
- DOM: bold+italic 스타일이 유지됨
- 커서: "x" 뒤에 위치
- Devtool: `case: "C1"`, mark가 분리되지 않음

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] Mark 유지: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 1.3 Range 없는 Mark가 있는 텍스트에 입력
**시나리오**:
1. `text-bold-after-img` 노드 (range 없는 bold mark)에 텍스트 입력

**예상 결과**:
- 모델: 텍스트 추가, mark는 그대로 유지 (range 없음)
- DOM: bold 스타일이 전체에 적용됨
- Devtool: mark가 분리되지 않고 전체에 적용됨

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] Mark 유지 (range 없음): ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 1.4 텍스트 삭제 (Backspace)
**시나리오**:
1. "Hello" 텍스트에서 "o" 뒤에 커서를 두고 Backspace 입력

**예상 결과**:
- 모델: `text: "Hell"`
- DOM: "Hell" 텍스트 표시
- 커서: "Hell" 뒤에 위치
- Devtool: `case: "C1"`, `inputType: "deleteContentBackward"`

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

## 2. 여러 노드에 걸친 텍스트 변경 (C2)

### 2.1 넓은 Selection + 덮어쓰기
**시나리오**:
1. 여러 inline-text 노드에 걸쳐 텍스트 선택
2. "New Text" 입력

**예상 결과**:
- 모델: 선택된 범위가 "New Text"로 교체
- DOM: 올바르게 렌더링
- 커서: "New Text" 뒤에 위치
- Devtool: `case: "C2"`

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 2.2 여러 노드에 걸친 삭제
**시나리오**:
1. 여러 inline-text 노드에 걸쳐 텍스트 선택
2. Delete 또는 Backspace 입력

**예상 결과**:
- 모델: 선택된 범위가 삭제됨
- DOM: 올바르게 렌더링
- 커서: 삭제된 위치에 위치

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

## 3. 구조 변경 (C3)

### 3.1 Enter 키 (insertParagraph)
**시나리오**:
1. 텍스트 중간에 커서를 두고 Enter 입력

**예상 결과**:
- 모델: 새로운 paragraph 노드가 생성됨
- DOM: 새로운 줄이 생성됨
- 커서: 새 paragraph의 시작 위치
- Devtool: `case: "C3"`, `inputType: "insertParagraph"`

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 3.2 Shift+Enter (insertLineBreak)
**시나리오**:
1. 텍스트 중간에 커서를 두고 Shift+Enter 입력

**예상 결과**:
- 모델: line break가 삽입됨 (또는 같은 paragraph 내 줄바꿈)
- DOM: 줄바꿈 표시
- 커서: 줄바꿈 뒤에 위치

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

## 4. 한글 입력 (IME)

### 4.1 기본 한글 입력
**시나리오**:
1. 빈 텍스트에 "안녕하세요" 입력

**예상 결과**:
- 모델: `text: "안녕하세요"`
- DOM: "안녕하세요" 텍스트 표시
- 커서: "안녕하세요" 뒤에 위치
- Devtool: `case: "C1"`, IME 조합 중간 상태는 무시됨

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌
- [ ] IME 처리: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 4.2 Mark가 있는 텍스트에 한글 입력
**시나리오**:
1. "bold and italic" 텍스트 (bold+italic mark) 중간에 커서를 두고 "안녕" 입력

**예상 결과**:
- 모델: 텍스트가 "bold 안녕and italic"로 변경, mark는 유지
- DOM: bold+italic 스타일이 유지됨
- 커서: "안녕" 뒤에 위치
- Mark가 분리되지 않음

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] Mark 유지: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

## 5. 붙여넣기

### 5.1 일반 텍스트 붙여넣기
**시나리오**:
1. 외부에서 "Pasted Text" 복사
2. 에디터에 붙여넣기

**예상 결과**:
- 모델: "Pasted Text"가 삽입됨
- DOM: 올바르게 렌더링
- 커서: 붙여넣은 텍스트 뒤에 위치
- Devtool: `case: "C2"` 또는 `"C1"`, `inputType: "insertFromPaste"`

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 5.2 Mark가 있는 텍스트에 붙여넣기
**시나리오**:
1. "bold and italic" 텍스트 (bold+italic mark) 중간에 커서를 두고 텍스트 붙여넣기

**예상 결과**:
- 모델: 붙여넣은 텍스트가 삽입됨
- Mark는 붙여넣은 텍스트에도 적용될 수 있음 (정책에 따라)
- DOM: 올바르게 렌더링

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] Mark 처리: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

## 6. Devtool 검증

### 6.1 Last Input 패널 확인
**시나리오**:
1. 텍스트 입력 후 Devtool의 "Last Input" 패널 확인

**확인 사항**:
- [ ] `case`가 올바르게 표시되는지 (C1, C2, C3 등)
- [ ] `inputType`이 올바르게 표시되는지
- [ ] `usedInputHint`가 올바르게 표시되는지
- [ ] `contentRange`가 올바르게 표시되는지
- [ ] `status` 아이콘이 올바른지 (✓/⚠/○)

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 6.2 Model Tree 업데이트 확인
**시나리오**:
1. 텍스트 입력 후 Devtool의 "Model Tree" 탭 확인

**확인 사항**:
- [ ] 텍스트가 올바르게 업데이트되는지
- [ ] Mark가 올바르게 표시되는지 (M, D, T)
- [ ] Selection이 올바르게 표시되는지

**문제점** (있는 경우):
```
[문제 설명]
```

---

## 7. 엣지 케이스

### 7.1 빈 노드에 입력
**시나리오**:
1. 빈 inline-text 노드에 커서를 두고 텍스트 입력

**예상 결과**:
- 모델: 텍스트가 추가됨
- DOM: 텍스트가 표시됨

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 7.2 노드 끝에서 입력
**시나리오**:
1. 텍스트 노드의 마지막에 커서를 두고 텍스트 입력

**예상 결과**:
- 모델: 텍스트가 추가됨
- DOM: 텍스트가 표시됨
- 커서: 올바른 위치

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 7.3 노드 시작에서 Backspace
**시나리오**:
1. 텍스트 노드의 시작에 커서를 두고 Backspace 입력

**예상 결과**:
- 모델: 이전 노드와 병합되거나 삭제됨 (정책에 따라)
- DOM: 올바르게 렌더링

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

## 테스트 결과 요약

### 성공한 시나리오
- [ ] 1.1 단일 inline-text에 텍스트 입력
- [ ] 1.2 Mark가 있는 텍스트에 입력
- [ ] 1.3 Range 없는 Mark가 있는 텍스트에 입력
- [ ] 1.4 텍스트 삭제 (Backspace)
- [ ] 2.1 넓은 Selection + 덮어쓰기
- [ ] 2.2 여러 노드에 걸친 삭제
- [ ] 3.1 Enter 키 (insertParagraph)
- [ ] 3.2 Shift+Enter (insertLineBreak)
- [ ] 4.1 기본 한글 입력
- [ ] 4.2 Mark가 있는 텍스트에 한글 입력
- [ ] 5.1 일반 텍스트 붙여넣기
- [ ] 5.2 Mark가 있는 텍스트에 붙여넣기
- [ ] 6.1 Last Input 패널 확인
- [ ] 6.2 Model Tree 업데이트 확인
- [ ] 7.1 빈 노드에 입력
- [ ] 7.2 노드 끝에서 입력
- [ ] 7.3 노드 시작에서 Backspace

### 발견된 버그 목록

1. **버그 #1**: [제목]
   - 시나리오: [어떤 시나리오에서 발생]
   - 증상: [무엇이 잘못되었는지]
   - 재현 방법: [어떻게 재현하는지]
   - 예상 원인: [추정되는 원인]

2. **버그 #2**: [제목]
   - ...

---

## 다음 단계

테스트 완료 후:
1. 발견된 버그를 우선순위별로 정리
2. 각 버그에 대한 수정 계획 수립
3. 수정 후 재테스트

