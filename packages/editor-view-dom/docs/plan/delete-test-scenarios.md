# 삭제 기능 테스트 시나리오

이 문서는 삭제 기능을 체계적으로 테스트하기 위한 시나리오를 제공합니다.

## 테스트 전 확인사항

1. 브라우저 콘솔 열기 (F12)
2. Devtool 오른쪽 패널 확인
3. "Last Input" 탭과 "Model Tree" 탭 준비

---

## 테스트 시나리오

### 1. 기본 Backspace 삭제 (C1)

#### 1.1 단일 문자 삭제
**시나리오**:
1. "Hello" 텍스트에서 "o" 뒤에 커서를 두고 Backspace 입력

**예상 결과**:
- 모델: `text: "Hell"`
- DOM: "Hell" 텍스트 표시
- 커서: "Hell" 뒤에 위치
- Devtool: `case: "C1"`, `inputType: "deleteContentBackward"`, `status: "✓"`

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌
- [ ] Devtool 표시: ✅ / ❌

**콘솔 로그 확인**:
```
[InputHandler] handleC1: CALLED
[InputHandler] handleC1: text change { type: 'delete', start: 4, end: 5, text: '' }
[InputHandler] handleC1: calling deleteText
```

**문제점** (있는 경우):
```
[문제 설명]
```

---

#### 1.2 여러 문자 삭제 (선택 후 삭제)
**시나리오**:
1. "Hello" 텍스트에서 "ell" 선택
2. Backspace 또는 Delete 입력

**예상 결과**:
- 모델: `text: "Ho"`
- DOM: "Ho" 텍스트 표시
- 커서: "H" 뒤에 위치
- Devtool: `case: "C1"` 또는 `"C2"`, `status: "✓"`

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

#### 1.3 Mark가 있는 텍스트에서 삭제
**시나리오**:
1. "bold and italic" 텍스트 (bold+italic mark)에서 "and" 선택
2. Backspace 입력

**예상 결과**:
- 모델: `text: "bold  italic"` (또는 "bold italic"), mark는 조정됨
- DOM: bold+italic 스타일이 유지됨
- 커서: "bold " 뒤에 위치
- Mark가 올바르게 조정됨 (분리되지 않음)

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] Mark 조정: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**Devtool에서 Mark 확인**:
- [ ] Mark가 올바르게 조정되었는지 (M, T, M 형태로 분리되지 않았는지)

**문제점** (있는 경우):
```
[문제 설명]
```

---

#### 1.4 Range 없는 Mark가 있는 텍스트에서 삭제
**시나리오**:
1. `text-bold-after-img` 노드 (range 없는 bold mark)에서 텍스트 일부 삭제

**예상 결과**:
- 모델: 텍스트가 삭제됨, mark는 그대로 유지 (range 없음)
- DOM: bold 스타일이 전체에 적용됨
- Devtool: mark가 분리되지 않고 전체에 적용됨

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] Mark 유지 (range 없음): ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 2. Delete 키 삭제

#### 2.1 단일 문자 삭제 (Delete)
**시나리오**:
1. "Hello" 텍스트에서 "H" 앞에 커서를 두고 Delete 입력

**예상 결과**:
- 모델: `text: "ello"`
- DOM: "ello" 텍스트 표시
- 커서: "ello" 시작 위치
- Devtool: `case: "C1"`, `inputType: "deleteContentForward"`

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 3. 여러 노드에 걸친 삭제 (C2)

#### 3.1 여러 inline-text 노드에 걸친 삭제
**시나리오**:
1. 여러 inline-text 노드에 걸쳐 텍스트 선택
2. Backspace 또는 Delete 입력

**예상 결과**:
- 모델: 선택된 범위가 삭제됨
- DOM: 올바르게 렌더링
- 커서: 삭제된 위치에 위치
- Devtool: `case: "C2"`, `status: "✓"`

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**콘솔 로그 확인**:
```
[InputHandler] handleC2: CALLED
[InputHandler] handleC2: calling replaceText (또는 deleteText)
```

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 4. 엣지 케이스

#### 4.1 노드 시작에서 Backspace
**시나리오**:
1. 텍스트 노드의 시작에 커서를 두고 Backspace 입력

**예상 결과**:
- 모델: 이전 노드와 병합되거나 삭제됨 (정책에 따라)
- DOM: 올바르게 렌더링
- 커서: 올바른 위치

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

#### 4.2 노드 끝에서 Delete
**시나리오**:
1. 텍스트 노드의 끝에 커서를 두고 Delete 입력

**예상 결과**:
- 모델: 다음 노드와 병합되거나 삭제됨 (정책에 따라)
- DOM: 올바르게 렌더링
- 커서: 올바른 위치

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

#### 4.3 빈 노드에서 Backspace
**시나리오**:
1. 빈 inline-text 노드에 커서를 두고 Backspace 입력

**예상 결과**:
- 모델: 노드가 삭제되거나 이전 노드와 병합됨
- DOM: 올바르게 렌더링

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

#### 4.4 전체 텍스트 선택 후 삭제
**시나리오**:
1. inline-text 노드의 전체 텍스트 선택 (Ctrl+A 또는 드래그)
2. Backspace 또는 Delete 입력

**예상 결과**:
- 모델: `text: ""` (빈 문자열)
- DOM: 빈 텍스트 노드 또는 placeholder 표시
- 커서: 노드 시작 위치
- Mark는 유지되거나 제거됨 (정책에 따라)

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌
- [ ] Mark 처리: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

### 5. 한글 삭제

#### 5.1 한글 문자 삭제
**시나리오**:
1. "안녕하세요" 텍스트에서 "요" 뒤에 커서를 두고 Backspace 입력

**예상 결과**:
- 모델: `text: "안녕하세"`
- DOM: "안녕하세" 텍스트 표시
- 커서: "안녕하세" 뒤에 위치
- 유니코드/서로게이트 페어가 올바르게 처리됨

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌
- [ ] 유니코드 처리: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

#### 5.2 한글 조합 중 삭제
**시나리오**:
1. 한글 입력 중 (조합 중) Backspace 입력

**예상 결과**:
- 모델: 조합이 취소되거나 중간 상태로 업데이트됨
- DOM: 올바르게 렌더링
- 커서: 올바른 위치

**실제 결과**:
- [ ] 모델 업데이트: ✅ / ❌
- [ ] DOM 렌더링: ✅ / ❌
- [ ] 커서 위치: ✅ / ❌
- [ ] IME 처리: ✅ / ❌

**문제점** (있는 경우):
```
[문제 설명]
```

---

## 테스트 결과 요약

### 성공한 시나리오
- [ ] 1.1 단일 문자 삭제
- [ ] 1.2 여러 문자 삭제 (선택 후 삭제)
- [ ] 1.3 Mark가 있는 텍스트에서 삭제
- [ ] 1.4 Range 없는 Mark가 있는 텍스트에서 삭제
- [ ] 2.1 단일 문자 삭제 (Delete)
- [ ] 3.1 여러 노드에 걸친 삭제
- [ ] 4.1 노드 시작에서 Backspace
- [ ] 4.2 노드 끝에서 Delete
- [ ] 4.3 빈 노드에서 Backspace
- [ ] 4.4 전체 텍스트 선택 후 삭제
- [ ] 5.1 한글 문자 삭제
- [ ] 5.2 한글 조합 중 삭제

### 발견된 버그 목록

1. **버그 #1**: [제목]
   - 시나리오: [어떤 시나리오에서 발생]
   - 증상: [무엇이 잘못되었는지]
   - 재현 방법: [어떻게 재현하는지]
   - 콘솔 로그: [관련 로그]
   - 예상 원인: [추정되는 원인]

2. **버그 #2**: [제목]
   - ...

---

## 다음 단계

테스트 완료 후:
1. 발견된 버그를 우선순위별로 정리
2. 각 버그에 대한 수정 계획 수립
3. 수정 후 재테스트

